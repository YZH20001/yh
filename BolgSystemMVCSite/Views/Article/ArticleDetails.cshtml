@model BlogSystem.Dto.ArticleDto
<link href="~/Content/details.css" rel="stylesheet" />
<link rel="stylesheet" href="https://at.alicdn.com/t/font_1341852_1yfpq1jqe91.css">
@{
    ViewBag.Title = "ArticleDetails";
}
<h2>文章详情</h2>

<div>
        <dl class="dl-horizontal table-bordered">
            <dt>
                @Html.DisplayNameFor(model => model.Title)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Title)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Content)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Content)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.CreateTime)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.CreateTime)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Email)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Email)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.GoodCount)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.GoodCount)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.BadCount)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.BadCount)
            </dd>

            @*<dt>
                @Html.DisplayNameFor(model => model.ImagePath)
            </dt>

            <dt>
                类别
            </dt>

            @foreach (var item in Model.CategoryNames)
            {
                <dd class="CategoryNames">
                    @item
                </dd>
            }*@
        </dl>
</div>
<div class="txtComment">
    <input type="text" name="txtComment" id="txtComment" value="" />
    <button onclick="addComment()">添加评论</button>
</div>

<p>
    <div class="btn_wrap">
        <div id="likeBox" style="height:20px;"></div>
        <button onclick="btnGoodHandler(this)" id="btnLike" class="layui-btn layui-btn-normal">点赞</button>
        <button onclick="btnBadHandler(this)">反对</button>
    </div>
    <br />
    @Html.ActionLink("编辑", "EditArticle", new { id = Model.Id }) |
    @Html.ActionLink("返回上一列", "AritcleList2")
</p>
<ol>
    @foreach (var comment in ViewBag.Comments)
    {
        <li>
            <span>@comment.Content</span>
            <br />
            <span>@comment.Email @comment.CreateTime</span>
        </li>
    }
</ol>
<script src="~/Scripts/articledetails.js"></script>
<script>
        var articleId = '@Model.Id';
        function btnGoodHandler(btn) {
            $.ajax({
                url: "/Article/GoodCount/"+articleId,
                type: "post"
            }).done(() => {
                //alert("点赞成功");
                btn.disabled = false;
            });
        }
        function btnBadHandler(btn) {
            $.ajax({
                url: "/Article/BadCount/"+articleId,
                type: "post"
            }).done(() => {
                alert("反对成功");
                btn.disabled = true;
            });
        }

        function addComment() {
            $.ajax({
                url: "/Article/AddComment",
                type: "post",
                data: {
                    Id: '@Model.Id',
                    Content:document.getElementById("txtComment").value
                }
            }).done(() => {
                alert("添加评论成功");
                location.reload();
            });
    }
</script>


