@model BolgSystemMVCSite.Models.ChangeInformationViewModel

@{
    ViewBag.Title = "ChangeInformation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>设置我的资料</h2>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.SiteName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.SiteName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.SiteName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.ImagePath, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.ImagePath, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ImagePath, "", new { @class = "text-danger" })
                @*<button type="button" class="layui-btn layui-btn-primary" id="LAY_avatarUpload" onchange="PreviewImage(this)">
                        <i class="layui-icon"></i>
                        上传图片
                    </button>*@
                <input type="file" onchange='PreviewImage(this)' class="layui-btn layui-btn-primary" id="LAY_avatarUpload" value="上传图片" />
            </div>
            <script>
                function PreviewImage(imgFile) {
                    var pattern = /(\.*.jpg$)|(\.*.png$)|(\.*.jpeg$)|(\.*.gif$)|(\.*.bmp$)/;
                    if (!pattern.test(imgFile.value)) {
                        alert("系统仅支持jpg/jpeg/png/gif/bmp格式的照片！");
                        imgFile.focus();
                    } else {
                        var path;
                        if (document.all) {//IE
                            imgFile.select();
                            path = document.selection.createRange().text;
                            document.getElementById("ImagePath").innerHTML = "";
                            document.getElementById("ImagePath").style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='scale',src=\"" + path + "\")";//使用滤镜效果
                        } else {//FF
                            path = URL.createObjectURL(imgFile.files[0]);
                            document.getElementById("ImagePath").value = path;
                        }
                    }
                    console.log(path)
                }

            </script>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="确认修改" class="layui-btn" />
            </div>
        </div>
    </div>
}
@section scripts{
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        reHeight();
        $(window).resize(function () {
            reHeight();
        });
        //设置iframe高度
        function reHeight() {
            var bodyHeight = $(window).height();
            bodyHeight = bodyHeight - 107;
            if (bodyHeight < 400) {
                bodyHeight = 400;
            }
            $("#demoAdmin").height(bodyHeight);
        }
    </script>

}

